<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Activities</title>
    <link rel="stylesheet" href="css/activities.css" />
  </head>
  <body>
    <div id="activityquestion"><b>Cosa facciamo dopo?</b></div>
    <div class="activities-selection">
      <div class="activity-item">
        <img src="activities/arcade.jpeg" alt="SalaGiochi" />
        <label
          ><input
            type="checkbox"
            name="activities"
            value="SalaGiochi"
          />Sala Giochi</label
        >
      </div>
      <div class="activity-item">
        <img src="activities/cinema.jpeg" alt="Cinema" />
        <label
          ><input
            type="checkbox"
            name="activities"
            value="Cinema"
          />Cinema</label
        >
      </div>
      <div class="activity-item">
        <img src="activities/amici.jpg" alt="Amici" />
        <label
          ><input
            type="checkbox"
            name="activities"
            value="Amici"
          />Amichetti</label
        >
      </div>
      <div class="activity-item">
        <img src="activities/tramonto.jpg" alt="Tramonto" />
        <label
          ><input
            type="checkbox"
            name="activities"
            value="Tramonto"
          />Tramonto</label
        >
      </div>
      <div class="activity-item">
        <img src="activities/parco.jpeg" alt="Parco" />
        <label
          ><input
            type="checkbox"
            name="activities"
            value="Parco"
          />Parco</label
        >
      </div>
    </div>
    <div class="activity-item">
      <img src="activities/scalata.jpg" alt="Scalata" />
      <label
        ><input
          type="checkbox"
          name="activities"
          value="Scalata"
        />Scalata</label
      >
    </div>
    <div class="activity-item">
      <img src="activities/mare.jpg" alt="Mare" />
      <label
        ><input
          type="checkbox"
          name="activities"
          value="Mare"
        />Mare</label
      >
    </div>
    <div class="activity-item">
      <img src="activities/cucire.jpg" alt="Cucire" />
      <label
        ><input
          type="checkbox"
          name="activities"
          value="Cucire"
        />Cucire</label
      >
    </div>
    <div class="new-activity">
      <h3>Aggiungi una nuova attività</h3>
      <input type="text" id="newActivity" placeholder="Scrivi una nuova attività" />
      <button id="addActivityButton">Aggiungi</button>
    </div>

    <script>
      // Funzione per gestire il clic sulle immagini
      function setupImageClickHandlers() {
        const activityItems = document.querySelectorAll('.activity-item');
        activityItems.forEach((item) => {
          const img = item.querySelector('img');
          const checkbox = item.querySelector('input[type="checkbox"]');
          img.addEventListener('click', () => {
            // Alterna la selezione del checkbox
            checkbox.checked = !checkbox.checked;
            // Aggiungi/rimuovi classe di selezione all'immagine
            img.classList.toggle('selected', checkbox.checked);
          });
        });
      }

      // Inizializza gli handler al caricamento della pagina
      setupImageClickHandlers();

      // Riferimento agli elementi HTML
      const newActivityInput = document.getElementById('newActivity');
      const addActivityButton = document.getElementById('addActivityButton');
      const activitiesContainer = document.querySelector('.activities-selection');

      // Funzione per aggiungere una nuova attività
      addActivityButton.addEventListener('click', () => {
        const newActivityValue = newActivityInput.value.trim();
        if (newActivityValue) {
          // Crea un nuovo elemento HTML per l'attività
          const newActivityItem = document.createElement('div');
          newActivityItem.className = 'activity-item';
          newActivityItem.innerHTML = `
            <img src="files/default.gif" alt="${newActivityValue}" />
            <input type="checkbox" name="activities" value="${newActivityValue}" />
            <label>${newActivityValue}</label>
          `;

          // Aggiungi il nuovo elemento al container
          activitiesContainer.appendChild(newActivityItem);

          // Aggiungi l'handler di clic alla nuova immagine
          setupImageClickHandlers();

          // Resetta il campo di input
          newActivityInput.value = '';
        } else {
          alert('Per favore, inserisci un\'attività valida.');
        }
      });
    </script>
  </div>
    <button class="button" onclick="location.href='lastpage.html'">
      continua!!!
    </button>
  </body>
</html>
